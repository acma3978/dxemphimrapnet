<?php defined('SYSPATH') or die('No direct script access.');class Controller_Frontend_Actor extends Controller_Frontend {    public function action_index(){        $title_ascii = $this->_input->filter_single('title_ascii', Light_Input::STRING);        $actor_id = $this->_input->filter_single('actor_id', Light_Input::STRING);        $fetch_otions = array(            'active_only' => TRUE,            'some_fields' => TRUE,        );        if(empty($actor_id) OR !$actorinfo = $this->_get_actor_model()->get_actor_info_by_actor_id($actor_id,$fetch_otions))        {            $this->redirect(                Light_Link::build('error', 'action=404', 'path=' . $this->request->uri())            );        }        $actorinfo = Light_Helper_Actor::parse($actorinfo);        $fetch_otions = array(            'active_only' => TRUE,            'some_fields' => TRUE,            'join'	=> Light_Model_Film::FETCH_USERINFO,        );        if(empty($actor_id) OR !$filminfo = $this->_get_film_model()->get_film_by_title_ascii($title_ascii, $fetch_otions))        {            $this->redirect(                Light_Link::build('error', 'action=404', 'path=' . $this->request->uri())            );        }        $url_canonical = Light_Link::film('film', $filminfo, NULL, TRUE, TRUE);        if(Light_Link::film('film', $this->request->param(), NULL, TRUE, TRUE) != $url_canonical)        {            $this->redirect($url_canonical, 301);        }        /*$filminfo = Light_Helper_Film::parse($filminfo, array('tags' => TRUE));        $filminfo = Light_Helper_Film::parse($filminfo, array('actors' => TRUE,'film_id' => $film_id));        // check correct url        //$url_canonical = Light_Link::film('film', $filminfo, NULL, TRUE, TRUE);        if(Light_Link::film('film', $this->request->param(), NULL, TRUE, TRUE) != $url_canonical)        {            $this->redirect($url_canonical, 301);        }        $filminfo['actor'] = str_replace(',', ', ', $filminfo['actor']);*/        // update views        if( ! Cookie::get('actor-'.$actor_id))        {            $this->_get_actor_model()->update_views($actor_id);            Cookie::set('actor-'.$actor_id, 1);        }        $view_params = array(            'page_title' => "Diễn viên Phim ".$filminfo['title']." | Full HD | Nội Dung Phim ".$filminfo['title_o'].' '.$filminfo['year'],            'page_keywords' =>  $keywords,            'page_description' => 'Nội Dung Phim ' . $filminfo['title'] . ', '.$filminfo['title'].', '.$filminfo['title'].' Full '.$filminfo['year'].': ' . $description,            'actorinfo' => $actorinfo,            'filminfo' => $filminfo,            'url_canonical' => $url_canonical,        );        $this->response_view('actor', $view_params,'4');    }}